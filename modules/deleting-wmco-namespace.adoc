// Module included in the following assemblies:
//
// * windows_containers/disabling-windows-container-workloads.adoc

:_mod-docs-content-type: PROCEDURE
[id="deleting-wmco-namespace_{context}"]
= Deleting the Windows Machine Config Operator namespace and operands

After removing the Windows Machine Config Operator, it is recommended that you remove the other components associated with the Operator to avoid potential issues.

.Prerequisites

* The Windows `Machine` objects that hosted your Windows workloads are removed from your cluster.
* The WMCO is removed from your cluster.

.Procedure

This procedure assumes that you are using the default `openshift-windows-machine-config-operator` namespace.

. Remove all WMCO resources that were created in the `openshift-windows-machine-config-operator` namespace by using the following command:
+
[source,terminal]
----
$ oc delete --all pods --namespace=openshift-windows-machine-config-operator
----
+
[NOTE]
====
The `openshift-windows-machine-config-operator` namespace is reserved for WMCO resources. There should be no Windows workloads or pods in the namespace.
====

. Verify that all pods in the `openshift-windows-machine-config-operator` namespace are deleted or are reporting a terminating state by using the following command:
+
[source,terminal]
----
$ oc get pods --namespace openshift-windows-machine-config-operator
----

. Delete the subscription and CSV: by using the following command:

.. Ensure the latest version of the subscribed operator is identified in the `currentCSV` field by using the following command:
+
[source,terminal]
----
$ oc get subscription.operators.coreos.com windows-machine-config-operator -n openshift-windows-machine-config-operator -o yaml | grep currentCSV
----
+
.Example output
[source,terminal]
----
  currentCSV: openshift-windows-machine-config-operator
----

.. Delete the subscription by using the following command:
+
[source,terminal]
----
$ oc delete subscription.operators.coreos.com windows-machine-config-operator -n openshift-windows-machine-config-operator
----
+
.Example output
[source,terminal]
----
subscription.operators.coreos.com "windows-machine-config-operator" deleted
----

.. Delete the CSV for the Operator in the target namespace  by using the following command with the `currentCSV` value from the previous step:
+
[source,terminal]
----
$ oc delete clusterserviceversion windows-machine-config-operator -n openshift-windows-machine-config-operator
----
+
.Example output
[source,terminal]
----
clusterserviceversion.operators.coreos.com "serverless-operator.v1.28.0" deleted
----

. Delete RBAC resources by using the following command:
+
[source,terminal]
----
$ oc delete clusterrolebinding windows-instance-config-daemon
----
+
[source,terminal]
----
$ oc delete clusterroles windows-instance-config-daemon
----

. Delete the `openshift-windows-machine-config-operator` namespace by using the following command:
+
[source,terminal]
----
$ oc delete namespace openshift-windows-machine-config-operator
----
