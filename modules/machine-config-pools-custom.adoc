// Module included in the following assemblies:
//
// * machine_configuration/machine-config-pools-about.adoc

:_mod-docs-content-type: CONCEPT
[id="machine-config-pools-custom_{context}"]
= About using custom machine config pools to configure nodes

You can apply machine configuration changes to specific sets of worker nodes by using _custom machine config pools_. A custom machine config pool manages its own sets of nodes, which are indicated with a node label. One example of this is a set of infrastructure nodes that host infrastructure components, such as the router or the image registry.

Custom machine config pools are based on the worker machine config pool. As such, custom pools inherit their initial configuration from the `worker` pool and any change to the `worker` pool is applied to the custom pool. Changes to the custom pool are not inherited by the `worker` pool. As such, custom machine config pools add the ability to deploy changes only targeted at the custom pool.

It is recommended to have a custom pool for every node role you want to manage in your cluster. For example, if you create infra nodes to handle infra workloads, it is recommended to create a custom infra MCP to group those nodes together. If you apply an `infra` role label to a worker node so it has the `worker,infra` dual label, but do not have a custom `infra` MCP, the MCO considers it a worker node. If you remove the `worker` label from a node and apply the `infra` label without grouping it in a custom pool, the node is not recognized by the MCO and is unmanaged by the cluster.

[NOTE]
====
You cannot use a master machine config pool to create a custom pool.
====

Note the following characteristics about nodes and machine config pools:

* A node can only be included in one machine config pool.
* A node must be included in a machine config pool for the node to function properly.
* If a node has multiple labels that correspond to different pools, such as `worker,infra`, the node is managed by the custom pool, not the `worker` pool. Custom pools take priority on selecting nodes to manage based on node labels.
* If a node has the `worker,infra` label, but you do not have an `infra` machine config pool, the node is considered a worker node.
* If a node has only a custom label that does not have a corresponding custom pool, the node is not recognized by the MCO and is unmanaged by the cluster.

[NOTE]
====
If a custom node reboots, the node reboots into the `worker` machine config pool. You need to reapply the custom label to that node to place the node back in the custom pool.
====
