// Module included in the following assemblies:
//
// * machine_configuration/machine-config-pools-about.adoc

:_mod-docs-content-type: PROCEDURE
[id="machine-config-pools-custom-modify_{context}"]
= Modifying a custom machine config pool

To deploy changes to a custom pool, create a `MachineConfig` object that uses the custom pool as the label, for example:

[source,yaml,subs="attributes+"]
----
apiVersion: machineconfiguration.openshift.io/v1
kind: MachineConfig
metadata:
  labels:
    machineconfiguration.openshift.io/role: infra
  name: 51-infra
spec:
  config:
    ignition:
      version: {ign-config-version}
    storage:
      files:
      - contents:
          source: data:,infra
        filesystem: root
        mode: 0644
        path: /etc/infratest
----

After a node returns to the `Ready` state, you can see that the machine config pool has been applied:

[source,terminal]
----
$ oc get mcp
----

.Example output
[source,terminal]
----
NAME     CONFIG                                             UPDATED   UPDATING   DEGRADED   MACHINECOUNT   READYMACHINECOUNT   UPDATEDMACHINECOUNT   DEGRADEDMACHINECOUNT   AGE
infra    rendered-custom-11f6e3ee8704373add6d3c3d8399b3fa   True      False      False      1              1                   1                     0                      11m
master   rendered-master-94cafd2f05c7cd9a3fce4877e699fa45   True      False      False      3              3                   3                     0                      119m
worker   rendered-worker-93ac02b5fc2e2526b8b15758df3d8472   True      False      False      2              2                   2                     0                      119m
----

Changes made to the custom machine config are not applied to the `worker` machine config.

However, if you make a change to the `worker` machine config pool, the change is applied to the `worker` and custom machine config pools and their associated nodes.

[source,terminal]
----
$ oc get mcp
----

.Example output
[source,terminal]
----
NAME     CONFIG                                             UPDATED   UPDATING   DEGRADED   MACHINECOUNT   READYMACHINECOUNT   UPDATEDMACHINECOUNT   DEGRADEDMACHINECOUNT   AGE
infra    rendered-custom-e7c94136ebb9f655bb20d7da14eb6c1f   False     True       False      1              0                   0                     0                      74m
master   rendered-master-6e3f6a6544848b5e1d8fccf57283263d   True      False      False      3              3                   3                     0                      113m
worker   rendered-worker-0a1b442474e43fee1d60a4b9aeb79ca0   False     True       False      2              0                   0                     0                      113m
----

[source,terminal]
----
$ oc get mc
----

[source,terminal]
----
rendered-infra-2ac5bfa5ab0950a344feb9d994f7eafd    b29dceb12638f3d7f30f339729344de69824a09b   3.2.0             5s <1>
rendered-infra-70be77bfe06c59869c66b64c12be9524    b29dceb12638f3d7f30f339729344de69824a09b   3.2.0             47m
rendered-infra-b5250cb9e8c4a0b9d3e16da185ba4bad    b29dceb12638f3d7f30f339729344de69824a09b   3.2.0             37m
rendered-infra-cb73231c08063f313b42225013ee909b    b29dceb12638f3d7f30f339729344de69824a09b   3.2.0             11m
rendered-master-142c359bb4f3b4f6f31c5ec154219ea4   b29dceb12638f3d7f30f339729344de69824a09b   3.2.0             77m
rendered-worker-70be77bfe06c59869c66b64c12be9524   b29dceb12638f3d7f30f339729344de69824a09b   3.2.0             77m
rendered-worker-d177d1547e6d6d5820876783942b6fc9   b29dceb12638f3d7f30f339729344de69824a09b   3.2.0             5s <2>
----
<1> New rendered custom machine config in response to the change.
<2> New rendered worker machine config in response to the change.
