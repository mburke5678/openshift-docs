// Module included in the following assemblies:
//
// * machine_configuration/machine-configs-configure

:_mod-docs-content-type: PROCEDURE
[id="mco-coredump-retention-policy_{context}"]
= Configuring the core dump retention policy

Because, by default anything in coredumpctl list older than 3 days will have it's coredump file removed from /var/lib/systemd/coredump
unless settings is modified from 3d to more days. For example, to change retention value to 10 days,create a file like /etc/tmpfiles.d/<filename>.conf with the following content:

You can find the default retention period by running the following command:

[source,terminal]
----
$ systemd-tmpfiles --cat-config | grep coredump
----

.Sample output
[source,terminal]
----
d /var/lib/systemd/coredump 0755 root root 3d 
----



.Prerequisites

* Install the OpenShift CLI (`oc`).
* Log in as a user with `cluster-admin` privileges.

.Procedure

. Create a file like /etc/tmpfiles.d/<filename>.conf with the following content:

d /var/lib/systemd/coredump 0755 root root 10d



. Create the `MachineConfig` CR that disables `chronyd` for the specified node role.

.. Save the following YAML in the `disable-chronyd.yaml` file:
+
[source,yaml]
----
  apiVersion: machineconfiguration.openshift.io/v1
  kind: MachineConfig
  metadata:
    labels:
      machineconfiguration.openshift.io/role: worker 
    name: 99-worker-coredump-retention
  spec:
    config:
      ignition:
        version: 3.1.0
      storage:
        files:
        - contents:
            source: data:text/plain;charset=utf-8;base64,ZCAvdmFyL2xpYi9zeXN0ZW1kL2NvcmVkdW1wIDA3NTUgcm9vdCByb290IDE0ZAo= <1>
          mode: 420
          overwrite: true
          path: /etc/tmpfiles.d/core.conf
    osImageURL: ""
----
<1> 

.. Create the `MachineConfig` CR by running the following command:
+
[source,terminal]
----
$ oc create -f disable-chronyd.yaml
----
