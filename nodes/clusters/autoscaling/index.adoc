:_content-type: ASSEMBLY
[id="overview-of-autoscaling"]
= Overview of autoscaling your cluster
include::_attributes/common-attributes.adoc[]
:context: overview-of-nodes

toc::[]


There are several different options you can use to automatically scale your cluster. You can scale the number of pods, the resources attached to those pods, or the number of nodes in your cluster.

You can configure autoscalers in your cluster to automatically scale your cluster the following ways:

* *Pod replica count*. The xref:../../../nodes/clusters/autoscaling/nodes-clusters-autoscaling-horizontal.adoc#nodes-clusters-autoscaling-horizontal[horizontal pod autoscaler (HPA)] sets the number of pods based on resource use. The horizontal pod autoscaler uses the metrics server to monitor the resource demand of pods and increases and decreases based on demand. The HPA work best for applications whose usage varies over time, so you can automatically add or remove pod replicas in response to changes in demand for those applications. 
+
The HPA is ideal for scaling stateless applications, although it can also support scaling stateful sets. Using HPA in combination with cluster autoscaling can help you achieve cost savings for workloads that see regular changes in demand by reducing the number of active nodes as the number of pods decreases.

// Hide until 4.11
* *Pod replica count based on custom metrics*. The custom metric autoscaler (CMA) sets the number of pods based on external events. The CMA uses the Kubernetes-based Event Driven Autoscaler (KEDA) to scale your pods up and down based on custom, external metrics from specific applications.
+
The CMA is better suited for workloads that are event-driven or uses specific meteric.

* *Pod resource scaling*. The xref:../../../nodes/clusters/autoscaling/nodes-clusters-autoscaling-vertical.adoc#nodes-clusters-autoscaling-vertical[vertical pod autoscaler] can increases and decreases CPU and memory resource requests on pods.  The VPA reviews the CPU and memory resources for containers in pods and updates the resource limits and requests based on the usage.
+
The VPA service can set container resource limits based on live data, rather than human guesswork or benchmarks that are only occasionally run.  
+
Using the VPA in combination with the cluster autoscaler can prevent problems if the VPA sets resource values tooo high. If the resources exceed the available resources on a node, resource pressure can set pods to pending. In this case, the cluster autoscaler would create some new nodes in response to pending pods.
 
* *Node count*. The xref:../../../nodes/clusters/autoscaling/nodes-clusters-autoscaling-cluster.adoc#nodes-clusters-autoscaling-cluster[cluster autoscaler] can set the number of nodes based on CPU or memory use. The cluster autoscaler watches for pods that cannot be scheduled on nodes because of resource constraints then automatically increases or decreases the number of nodes in your cluster.
+
Dynamically scaling the number of nodes to match current cluster utilization can help manage the costs of running Kubernetes clusters on a cloud provider platform, especially with workloads that are designed to scale to meet current demand.
The HPA and VPA are currently incompatible. It is recommended to not use both the VPA and HPA together for the same set of pods. VPA can however be used with HPA that is configured to use either external or custom metrics. 

// Hide if not 4.11
[NOTE]
====
VPA and HPA should only be used simultaneously to manage a given workload if the HPA configuration does not use CPU or memory to determine scaling targets.
====



[id="overview-of-autoscaling-vpa"]
== Using the horizontal pod autoscaler to scale pods by CPU and memory use

For more information on the vertical pod autoscaler, see xref:../../../nodes/clusters/autoscaling/nodes-clusters-autoscaling-vertical.adoc#nodes-clusters-autoscaling-vertical[Automatically adjust pod resource levels with the vertical pod autoscaler]

[id="overview-of-autoscaling-cluster"]
== Applying autoscaling to an OpenShift Container Platform cluster

For more information on the cluster autoscaler, see xref:../../../nodes/clusters/autoscaling/nodes-clusters-autoscaling-cluster.adoc#nodes-clusters-autoscaling-cluster[Automatically adjust pod resource levels with the vertical pod autoscaler]


