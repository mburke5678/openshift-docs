:_mod-docs-content-type: ASSEMBLY
:context: machine-configs-configure
[id="machine-config-pool-custom"]
= Using custom machine config pools to configure nodes
include::_attributes/common-attributes.adoc[]

toc::[]



By default, there are two machine config pools (MCP) created by the cluster when it is installed: `master` and `worker`.  Each MCP manages a set of nodes and its corresponding machine configs. 

You can create _custom machine config pools_ that give you the ability to deploy changes that are targeted at specific worker nodes. One example of this is an infrastructure node that hosts only infrastructure components, such as the router or the image registry.   

For information on infra nodes, see the Additional resources at the end of this section.

Custom machine config pools are based on the worker machine config pool. As such, custom pools inherit their initial configuration from the worker pool and any change to the worker pool is applied to the custom pool. Changes to the custom pool are not inherited by the worker pool.

[NOTE]
====
You cannot use a master machine config pool to create a custom pool.
====

Note the following about nodes and machine config pools:

* A node can only be included in one machine config pool. 
* A node must be included in a machine config pool for the node to function properly.
* If a node has multiple labels that correspond to different pools, such as `worker,infra`, the node is managed by the custom pool, not the worker pool. Custom pools take priority on selecting nodes to manage based on node labels.
* If a node has the `worker,infra` label, but you do not have an infra machine config pool, the Machine Config Operator (MCO) considers the node a worker node.
* If a node has only a custom label that does not have a corresponding custom pool, the node is not recognized by the MCO and is unmanaged by the cluster.

Because the custom pool inherits its configuration from the worker machine config pool by default, a purely custom node stills get updated when a worker machine config is updated. However, workloads scheduled for worker nodes are no longer scheduled on the custom node.

[NOTE]
====
If a custom node reboots, the node reboots into the `worker` machine config pool. You need to reapply the custom label to that node to place the node back in the custom pool. 
====

include::modules/machine-config-pools-custom-configure.adoc[leveloffset=+1]
include::modules/machine-config-pools-custom-modify.adoc[leveloffset=+1]
include::modules/machine-config-pools-custom-removing.adoc[leveloffset=+1]

