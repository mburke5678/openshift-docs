:_content-type: ASSEMBLY
[id="windows-containers-release-notes-9-x"]
= {productwinc} release notes
include::_attributes/common-attributes.adoc[]
:context: windows-containers-release-notes

toc::[]

[id="about-windows-containers"]
== About {productwinc}

Windows Container Support for {product-title} enables running Windows compute nodes in an {product-title} cluster. Running Windows workloads is possible by using the Red Hat Windows Machine Config Operator (WMCO) to install and manage Windows nodes. With Windows nodes available, you can run Windows container workloads in {product-title}.

These release notes track the development of the WMCO, which provides all Windows container workload capabilities in {product-title}.

ifndef::openshift-origin[]
[id="getting-support"]
== Getting support

// wording taken and modified from https://access.redhat.com/support/policy/updates/openshift#windows

Windows Container Support for {product-title} is provided and available as an optional, installable component. Windows Container Support for Red Hat OpenShift is not part of the {product-title} subscription. It requires an additional Red Hat subscription and is supported according to the link:https://access.redhat.com/support/offerings/production/soc/[Scope of coverage] and link:https://access.redhat.com/support/offerings/production/sla[Service level agreements].

You must have this separate subscription to receive support for Windows Container Support for Red Hat OpenShift. Without this additional Red Hat subscription, deploying Windows container workloads in production clusters is not supported. You can request support through the link:http://access.redhat.com/[Red Hat Customer Portal].

For more information, see the Red Hat OpenShift Container Platform Life Cycle Policy document for link:https://access.redhat.com/support/policy/updates/openshift#windows[{productwinc}].
endif::openshift-origin[]

[id="wmco-9-0-2"]
== Release notes for Red Hat Windows Machine Config Operator 9.0.2

This release of the WMCO provides new features and bug fixes for running Windows compute nodes in an {product-title} cluster. The components of the WMCO 9.0.2 were released in link:https://access.redhat.com/errata/RHBA-2024:2830[RHBA-2024:2830].

[id="wmco-9-0-2-bug-fixes"]
=== Bug fixes

* Previously, the kubelet was unable to authenticate with private ECR registries. Beacuse of this error, the kubelet was not able to pull images from these registries. With this fix, the kubelet is able to pull images from these registries as expected. (link:https://issues.redhat.com/browse/OCPBUGS-32136[*OCPBUGS-32136*])


[id="wmco-9-0-1"]
== Release notes for Red Hat Windows Machine Config Operator 9.0.1

This release of the WMCO provides new features and bug fixes for running Windows compute nodes in an {product-title} cluster. The components of the WMCO 9.0.1 were released in link:https://access.redhat.com/errata/RHSA-2024:1203[RHSA-2024:1203].


[id="wmco-9-0-1-bug-fixes"]
=== Bug fixes

// Reviewed in WMCO 10.15.0 RN PR 
* Previously, because of a lack of synchronization between Windows machine set nodes and Bring-Your-Own-Host (BYOH) instances, during an update the machine set nodes and the BYOH instances could update simultaneously. This could impact running workloads. This fix introduces a locking mechanism so that machine set nodes and BYOH instances update individually. (link:https://issues.redhat.com/browse/OCPBUGS-22984[*OCPBUGS-22984*])

// Reviewed in WMCO 10.15.0 RN PR
* Previously, because of a missing secret, the WMCO could not configure proper credentials for the WICD on Nutanix clusters. As a consequence, the WMCO could not create Windows nodes. With this fix, the WMCO creates long-lived credentials for the WICD service account. As a result, the WMCO is able to configure a Windows node on Nutanix clusters. (link:https://issues.redhat.com/browse/OCPBUGS-24748[*OCPBUGS-24748*])

// Reviewed in WMCO 10.15.0 RN PR
* Previously, because of bad logic in the networking configuration script, the WICD was incorrectly reading carriage returns in the CNI configuration file as changes, and identified the file as modified. This caused the CNI configuration to be unnecessarily reloaded, potentially resulting in container restarts and brief network outages. With this fix, the WICD now reloads the CNI configuration only when the CNI configuration is actually modified. (link:https://issues.redhat.com/browse/OCPBUGS-27046[*OCPBUGS-27046*])

* Previously, because the WMCO performed an erroneous sanitization step that replaced commas with semicolons in the cluster-wide proxy configuration, Windows would ignore the endpoints specified in the `noProxy` parameter. As a consequence, traffic was being incorrectly sent through those proxies. With this fix, the sanitization step was removed. As a result, a web request from a Windows node to a cluster-internal endpoint or an endpoint that exists in the `noProxy` parameter does not go through the proxy. (link:https://issues.redhat.com/browse/OCPBUGS-27240[*OCPBUGS-27240*])

* Previously, because of routing issues present in Windows Server 2019, under certain conditions and after more than one hour of running time, workloads on Windows Server 2019 could have experienced packet loss when communicating with other containers in the cluster. This fix enables Direct Server Return (DSR) routing within kube-proxy. As a result, DSR now causes request and response traffic to use a different network path, circumventing the bug within Windows Server 2019. (link:https://issues.redhat.com/browse/OCPBUGS-28226[*OCPBUGS-28226*])

[id="wmco-9-0-0"]
== Release notes for Red Hat Windows Machine Config Operator 9.0.0

This release of the WMCO provides new features and bug fixes for running Windows compute nodes in an {product-title} cluster. The components of the WMCO 9.0.0 were released in link:https://access.redhat.com/errata/RHSA-2023:1372[RHSA-2023:1372].

[id="wmco-9-0-0-new-features"]
=== New features and improvements

[id="wmco-9-0-0-cluster-wide"]
==== Support cluster-wide proxy on Windows containers

Clusters that use a cluster-wide proxy now support WMCO. Starting with {product-title} version 4.14, WMCO can consume and use a global egress proxy configuration when making external requests outside the cluster's internal network. For more information, see xref:../networking/enable-cluster-wide-proxy.adoc#enable-cluster-wide-proxy[Configuring the cluster-wide proxy].

[id="wmco-9-0-0-nutanix"]
==== Support Windows Containers on Nutanix

Clusters installed on Nutanix now support Windows Server 2022 nodes. You can create a Windows machine set on Nutanix to host Windows Server 2022 compute nodes. For more information, see xref:../windows_containers/creating_windows_machinesets/creating-windows-machineset-nutanix.adoc#creating-windows-machineset-nutanix[Creating a Windows machine set on Nutanix]. 

[id="wmco-9-0-0-priority-class"]
==== New scheduling priority class

WMCO now supports the `windows-priorityclass` kubelet parameter, which ensures that running pods do not deplete the kubelet of CPU cycles. By default, the `windows-priorityclass` parameter is set to `ABOVE_NORMAL_PRIORITY_CLASS`. It is not recommended to change this setting. For more information on this parameter, see link:https://kubernetes.io/docs/concepts/configuration/windows-resource-management/#resource-management-cpu[CPU management] in the Kubernetes documentation.

[id="wmco-9-0-0-csi-proxy"]
==== CSI Proxy support for Windows Containers

WMCO now supports the use of persistent storage for Windows workloads, without the use of in-tree storage drivers, by running the CSI Proxy service on each Windows node. Windows pods on each node now have access to storage through persistent volume claims.

With CSI proxy running on a cluster's Windows nodes, you can deploy the Container Storage Interface (CSI) storage drivers of your choice as a Windows daemon set. For more information on CSI Proxy, see link:https://kubernetes.io/blog/2021/08/09/csi-windows-support-with-csi-proxy-reaches-ga/[CSI Windows Support (with CSI Proxy)] in the Kubernetes documentation. For information on CSI, see xref:../storage/container_storage_interface/persistent-storage-csi.adoc#persistent-storage-csi[Configuring CSI volumes] in the {product-title} documentation. 

[id="wmco-9-0-0-technical-changes"]
=== Notable technical changes

[id="wmco-9-0-0-ssh-password"]
==== SSH password authentication is disabled for all Windows Machine nodes

SSH password authentication is now disabled by default for all Windows nodes. The nodes now reject SSH connections that do not use public key authentication. This change is required by {op-system-first}.

[id="wmco-9-0-0-bug-fixes"]
=== Bug fixes

* Previously, on an Azure Windows Server 2019 platform that does not have the Azure container service installed, WMCO would fail to deploy Windows instances and would display the following error message:
+
[source,text]
----
Install-WindowsFeature : Win32 internal error "Access is denied" 0x5 occurred while reading the console output buffer
----
+
The failure occurred because the Microsoft `Install-WindowsFeature` cmdlet displays a progress bar that cannot be sent over an SSH connection. This fix hides the progress bar. As a result, Windows instances can be deployed as nodes. (link:https://issues.redhat.com/browse/OCPBUGS-13244[*OCPBUGS-13244*])

include::modules/wmco-prerequisites.adoc[leveloffset=+1]

include::modules/windows-containers-release-notes-limitations.adoc[leveloffset=+1] 

